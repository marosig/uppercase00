<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uppercase - Glow Up Journey</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #764ba2;
            --secondary: #40e0ff;
            --bg-primary: #f5f6ff;
            --bg-secondary: #e0e7ff;
            --bg-card: rgba(255, 255, 255, 0.9);
            --text-primary: #1e3a8a;
            --text-secondary: #4b5563;
            --accent: #10b981;
            --danger: #ef4444;
        }

        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f59e0b;
        }

        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #475569;
        }

        [data-theme="neon"] {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --text-primary: #e94560;
            --text-secondary: #00ffcc;
            --primary: #ff2e63;
            --primary-dark: #e9004c;
            --secondary: #00ffcc;
            --accent: #39ff14;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        .bg-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(102, 126, 234, 0.4);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .theme-selector {
            display: flex;
            gap: 10px;
        }

        .theme-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--text-secondary);
            cursor: pointer;
            transition: transform 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        .theme-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 8px var(--primary);
        }

        .theme-btn.active {
            border-color: var(--primary);
            border-width: 3px;
        }

        .theme-btn[data-theme="dark"] { background: linear-gradient(45deg, #0f172a, #1e293b); }
        .theme-btn[data-theme="light"] { background: linear-gradient(45deg, #f8fafc, #e2e8f0); }
        .theme-btn[data-theme="white"] { background: linear-gradient(45deg, #ffffff, #f3f4f6); }
        .theme-btn[data-theme="neon"] { background: linear-gradient(45deg, #1a1a2e, #e94560); }

        .nav-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 40px;
            background: var(--bg-card);
            backdrop-filter: blur(12px);
            border-radius: 25px;
            padding: 12px;
            border: 1px solid rgba(64, 224, 255, 0.2);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .nav-tab {
            background: transparent;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            transition: left 0.3s ease;
            z-index: -1;
        }

        .nav-tab:hover::before {
            left: 0;
        }

        .nav-tab:hover {
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(64, 224, 255, 0.3);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #ffffff;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .section {
            display: none;
            background: var(--bg-card);
            backdrop-filter: blur(12px);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(64, 224, 255, 0.2);
            animation: slideInUp 0.6s ease;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 24px;
            text-align: center;
        }

        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }

        .quiz-step {
            display: none;
            background: #ffffff;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 24px;
            animation: slideIn 0.5s ease;
        }

        .quiz-step.active {
            display: block;
        }

        .quiz-emoji {
            font-size: 2rem;
            margin-bottom: 16px;
        }

        .quiz-question {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
        }

        .quiz-option {
            background: var(--bg-secondary);
            border: 2px solid var(--text-secondary);
            border-radius: 12px;
            padding: 14px 18px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            transition: left 0.3s ease;
            z-index: -1;
        }

        .quiz-option:hover::before {
            left: 0;
        }

        .quiz-option:hover {
            color: #ffffff;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }

        .quiz-option.selected {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 20px rgba(64, 224, 255, 0.3);
        }

        .quiz-progress {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--text-secondary);
            transition: background 0.3s;
        }

        .progress-dot.active {
            background: var(--primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--bg-secondary);
            border-radius: 12px;
            font-size: 0.95rem;
            background: #ffffff;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: #ffffff;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px 4px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transition: left 0.3s ease;
            z-index: -1;
        }

        .btn:hover::before {
            left: 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:active {
            transform: translateY(0);
            scale: 0.98;
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #8b5cf6);
        }

        .btn-secondary::before {
            background: linear-gradient(135deg, #8b5cf6, var(--secondary));
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        .btn-danger::before {
            background: linear-gradient(135deg, #dc2626, var(--danger));
        }

        .timeline {
            margin-top: 20px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: var(--bg-secondary);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            position: relative;
            transition: all 0.3s ease;
        }

        .timeline-item.completed {
            border-left-color: var(--accent);
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.2), rgba(255, 255, 255, 0.1));
        }

        .timeline-item.completed .timeline-title {
            text-decoration: line-through;
        }

        .timeline-time {
            font-weight: 700;
            color: var(--primary);
            min-width: 80px;
            margin-right: 20px;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .timeline-emoji {
            font-size: 1.5rem;
            margin-left: 10px;
        }

        .task-checkbox {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid var(--secondary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .task-checkbox:checked {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border: none;
        }

        .task-checkbox:checked::after {
            content: '‚úì';
            color: #ffffff;
            font-size: 12px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .routine-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .routine-card {
            background: #ffffff;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .routine-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }

        .routine-card h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .gratitude-list {
            list-style: none;
        }

        .gratitude-item {
            background: #ffffff;
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 12px;
            border-left: 4px solid var(--accent);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .gratitude-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #ffffff;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .ai-assistant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: var(--bg-card);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(64, 224, 255, 0.3);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .ai-assistant:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 24px rgba(64, 224, 255, 0.3);
        }

        .ai-orb {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            animation: ai-pulse 2s ease-in-out infinite;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(100%);
            transition: transform 0.3s;
            z-index: 1001;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        @keyframes ai-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            .header {
                flex-direction: column;
                gap: 15px;
            }
            .logo {
                font-size: 2rem;
            }
            .nav-tabs {
                flex-direction: column;
                align-items: center;
            }
            .routine-grid {
                grid-template-columns: 1fr;
            }
            .section {
                padding: 24px;
            }
            .timeline-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .timeline-time {
                margin-right: 0;
                margin-bottom: 10px;
            }
            .task-checkbox {
                position: static;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body data-theme="white">
    <div class="bg-particles" id="particles"></div>
    <div class="container">
        <header class="header">
            <h1 class="logo">‚ú® UperCase</h1>
            <div class="theme-selector">
                <button class="theme-btn white active" data-theme="white" aria-label="White theme"></button>
                <button class="theme-btn dark" data-theme="dark" aria-label="Dark theme"></button>
                <button class="theme-btn light" data-theme="light" aria-label="Light theme"></button>
                <button class="theme-btn neon" data-theme="neon" aria-label="Neon theme"></button>
            </div>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('routine')">üåÖ Routine</button>
            <button class="nav-tab" onclick="showSection('gym')">üí™ Fitness</button>
            <button class="nav-tab" onclick="showSection('notepad')">üìù Journal</button>
            <button class="nav-tab" onclick="showSection('gratitude')">üôè Gratitude</button>
            <button class="nav-tab" onclick="showSection('tasks')">‚úÖ Tasks</button>
        </div>

        <!-- Routine Section -->
        <div id="routine" class="section active">
            <h2>Smart Routine Generator</h2>
            <div class="quiz-container">
                <div class="quiz-progress" id="routineProgress"></div>
                <div id="routineQuiz"></div>
                <div id="routineResult" class="timeline"></div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="btn btn-secondary" id="routinePrev" disabled>‚¨ÖÔ∏è Back</button>
                    <button class="btn" id="routineNext">Next ‚û°Ô∏è</button>
                    <button class="btn btn-success" id="routineFinish" style="display: none;">üéâ Finish!</button>
                </div>
            </div>
        </div>

        <!-- Fitness Section -->
        <div id="gym" class="section">
            <h2>Fitness Intelligence System</h2>
            <div class="quiz-container">
                <div class="quiz-progress" id="fitnessProgress"></div>
                <div id="fitnessQuiz"></div>
                <div id="fitnessResult" class="routine-grid"></div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="btn btn-secondary" id="fitnessPrev" disabled>‚¨ÖÔ∏è Back</button>
                    <button class="btn" id="fitnessNext">Next ‚û°Ô∏è</button>
                    <button class="btn btn-success" id="fitnessFinish" style="display: none;">üéâ Finish!</button>
                </div>
            </div>
        </div>

        <!-- Journal Section -->
        <div id="notepad" class="section">
            <h2>Neural Journal</h2>
            <div class="form-group">
                <textarea id="personalNotes" placeholder="Reflect on your day, goals, or dreams..." aria-label="Journal"></textarea>
                <button class="btn" onclick="saveNotepad()">üíæ Save</button>
                <button class="btn btn-danger" onclick="clearNotepad()">üóëÔ∏è Clear</button>
            </div>
        </div>

        <!-- Gratitude Section -->
        <div id="gratitude" class="section">
            <h2>Gratitude Lab</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="gratitudeCount">0</div>
                    <div class="stat-label">Today's Gratitudes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5</div>
                    <div class="stat-label">Daily Target</div>
                </div>
            </div>
            <div class="form-group">
                <input type="text" id="gratitudeInput" placeholder="I'm grateful for..." aria-label="Gratitude entry">
                <button class="btn" onclick="addGratitude()">‚ûï Add Gratitude</button>
            </div>
            <ul id="gratitudeList" class="gratitude-list"></ul>
            <button class="btn btn-danger" onclick="clearGratitude()">üîÑ Reset Lab</button>
        </div>

        <!-- Task Section -->
        <div id="tasks" class="section">
            <h2>Task Matrix</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalTasks">0</div>
                    <div class="stat-label">Total Tasks</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completedTasks">0</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="progressPercentage">0%</div>
                    <div class="stat-label">Progress</div>
                </div>
            </div>
            <div class="form-group">
                <input type="text" id="taskInput" placeholder="Add a new task..." aria-label="New task">
                <button class="btn" onclick="addTask()">‚ûï Add Task</button>
            </div>
            <div id="taskList" class="timeline"></div>
            <button class="btn btn-danger" onclick="clearTasks()">üóëÔ∏è Clear All</button>
        </div>

        <div class="ai-assistant" onclick="toggleAI()">
            <div class="ai-orb">ü§ñ</div>
            <div>
                <div style="font-weight: 600; color: var(--text-primary);">ARIA AI</div>
                <div style="font-size: 12px; color: var(--text-secondary);">Your Glow-Up Guide</div>
            </div>
        </div>

        <div id="notification" class="notification" role="alert"></div>
    </div>

    <script>
        // State management
        const appState = {
            user: { theme: 'white' },
            routineAnswers: {},
            fitnessAnswers: {},
            gratitudeItems: JSON.parse(localStorage.getItem('gratitude') || '[]'),
            tasks: JSON.parse(localStorage.getItem('tasks') || '[]'),
            routineStep: 1,
            fitnessStep: 1
        };

        // Quiz questions
        const routineQuestions = [
            { id: 'name', question: "What's your name, champ?", emoji: 'üåü', type: 'input', placeholder: 'Enter your name' },
            { id: 'wakeTime', question: 'When do you wake up?', emoji: 'üåû', type: 'time', defaultValue: '07:00' },
            { id: 'workHours', question: 'Hours for work/study daily?', emoji: 'üìö', type: 'number', min: 0, max: 12, defaultValue: 4 },
            { id: 'workoutTime', question: 'When do you exercise?', emoji: 'üí™', type: 'single', options: ['Morning', 'Evening', 'None'] },
            { id: 'hobbyHours', question: 'Hours for hobbies?', emoji: 'üé®', type: 'number', min: 0, max: 8, defaultValue: 2 },
            { id: 'mainGoal', question: 'Main glow-up goal?', emoji: 'üéØ', type: 'single', options: ['Productivity', 'Health', 'Mental Wellness'] },
            { id: 'sleepHours', question: 'Target sleep hours?', emoji: 'üò¥', type: 'number', min: 4, max: 10, defaultValue: 7 }
        ];

        const fitnessQuestions = [
            { id: 'fitnessLevel', question: 'Current fitness level?', emoji: 'üèãÔ∏è', type: 'single', options: ['Beginner', 'Intermediate', 'Advanced'] },
            { id: 'fitnessGoal', question: 'Primary fitness goal?', emoji: 'üéØ', type: 'single', options: ['Weight Loss', 'Muscle Gain', 'Endurance'] },
            { id: 'dietaryRestrictions', question: 'Dietary restrictions?', emoji: 'üçΩÔ∏è', type: 'single', options: ['None', 'Vegetarian', 'Vegan', 'Gluten-Free'] },
            { id: 'workoutDays', question: 'Workout days per week?', emoji: 'üìÖ', type: 'number', min: 1, max: 7, defaultValue: 3 },
            { id: 'workoutLocation', question: 'Gym or home workouts?', emoji: 'üè†', type: 'single', options: ['Gym', 'Home'] },
            { id: 'experience', question: 'Years of fitness experience?', emoji: '‚è≥', type: 'number', min: 0, max: 20, defaultValue: 0 }
        ];

        // Initialize quiz
        function initQuiz(quizId, questions, currentStep) {
            const quizContainer = document.getElementById(quizId);
            quizContainer.innerHTML = questions.map((q, index) => `
                <div class="quiz-step ${index + 1 === currentStep ? 'active' : ''}" data-step="${index + 1}">
                    <div class="quiz-emoji">${q.emoji}</div>
                    <div class="quiz-question">${q.question}</div>
                    <div class="quiz-options">
                        ${q.type === 'single' ? q.options.map(opt => `
                            <div class="quiz-option" onclick="selectOption('${quizId}', '${q.id}', '${opt}')">${opt}</div>
                        `).join('') : q.type === 'input' ? `
                            <input type="text" id="${q.id}" placeholder="${q.placeholder}" oninput="saveInput('${quizId}', '${q.id}')">
                        ` : q.type === 'time' ? `
                            <input type="time" id="${q.id}" value="${q.defaultValue}" oninput="saveInput('${quizId}', '${q.id}')">
                        ` : `
                            <input type="number" id="${q.id}" min="${q.min}" max="${q.max}" value="${q.defaultValue}" oninput="saveInput('${quizId}', '${q.id}')">
                        `}
                    </div>
                </div>
            `).join('');
            updateQuizProgress(quizId, currentStep, questions.length);
        }

        // Update quiz progress
        function updateQuizProgress(quizId, step, total) {
            const progressContainer = document.getElementById(quizId === 'routineQuiz' ? 'routineProgress' : 'fitnessProgress');
            progressContainer.innerHTML = Array.from({ length: total }, (_, i) => `
                <div class="progress-dot ${i < step ? 'active' : ''}"></div>
            `).join('');
            const prevBtn = document.getElementById(quizId === 'routineQuiz' ? 'routinePrev' : 'fitnessPrev');
            const nextBtn = document.getElementById(quizId === 'routineQuiz' ? 'routineNext' : 'fitnessNext');
            const finishBtn = document.getElementById(quizId === 'routineQuiz' ? 'routineFinish' : 'fitnessFinish');
            prevBtn.disabled = step === 1;
            nextBtn.style.display = step === total ? 'none' : 'inline-block';
            finishBtn.style.display = step === total ? 'inline-block' : 'none';
        }

        // Select option
        function selectOption(quizId, id, value) {
            const answers = quizId === 'routineQuiz' ? appState.routineAnswers : appState.fitnessAnswers;
            answers[id] = value;
            document.querySelectorAll(`#${quizId} [data-step="${quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep}"] .quiz-option`).forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        // Save input
        function saveInput(quizId, id) {
            const answers = quizId === 'routineQuiz' ? appState.routineAnswers : appState.fitnessAnswers;
            answers[id] = document.getElementById(id).value;
        }

        // Validate quiz step
        function validateQuizStep(quizId, step) {
            const questions = quizId === 'routineQuiz' ? routineQuestions : fitnessQuestions;
            const answers = quizId === 'routineQuiz' ? appState.routineAnswers : appState.fitnessAnswers;
            const q = questions[step - 1];
            if (q.type === 'single' && !answers[q.id]) {
                showNotification(`‚ö†Ô∏è Please select an option for ${q.question}`);
                return false;
            }
            if (q.type === 'input' && !answers[q.id]?.trim()) {
                showNotification(`‚ö†Ô∏è Please enter a value for ${q.question}`);
                return false;
            }
            if (q.type === 'time' && !answers[q.id]) {
                showNotification(`‚ö†Ô∏è Please select a time for ${q.question}`);
                return false;
            }
            if (q.type === 'number' && (isNaN(answers[q.id]) || answers[q.id] < q.min || answers[q.id] > q.max)) {
                showNotification(`‚ö†Ô∏è Please enter a valid number between ${q.min} and ${q.max} for ${q.question}`);
                return false;
            }
            return true;
        }

        // Quiz navigation
        function prevQuestion(quizId) {
            const step = quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep;
            if (step > 1) {
                if (quizId === 'routineQuiz') appState.routineStep--;
                else appState.fitnessStep--;
                document.querySelectorAll(`#${quizId} .quiz-step`).forEach(s => s.classList.remove('active'));
                document.querySelector(`#${quizId} [data-step="${quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep}"]`).classList.add('active');
                updateQuizProgress(quizId, quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep, quizId === 'routineQuiz' ? routineQuestions.length : fitnessQuestions.length);
            }
        }

        function nextQuestion(quizId) {
            const step = quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep;
            const total = quizId === 'routineQuiz' ? routineQuestions.length : fitnessQuestions.length;
            if (validateQuizStep(quizId, step) && step < total) {
                if (quizId === 'routineQuiz') appState.routineStep++;
                else appState.fitnessStep++;
                document.querySelectorAll(`#${quizId} .quiz-step`).forEach(s => s.classList.remove('active'));
                document.querySelector(`#${quizId} [data-step="${quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep}"]`).classList.add('active');
                updateQuizProgress(quizId, quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep, total);
            }
        }

        function finishQuiz(quizId) {
            const step = quizId === 'routineQuiz' ? appState.routineStep : appState.fitnessStep;
            if (validateQuizStep(quizId, step)) {
                if (quizId === 'routineQuiz') generateRoutine();
                else generateFitness();
            }
        }

        // Generate Routine
        function generateRoutine() {
            const { name, wakeTime, workHours, workoutTime, hobbyHours, mainGoal, sleepHours } = appState.routineAnswers;
            const schedule = [];
            const addTimeSlot = (time, title, description, emoji) => {
                schedule.push({ time, title, description, completed: false, emoji });
            };
            const wake = wakeTime || '07:00';
            if (mainGoal === 'Productivity') {
                addTimeSlot(wake, 'Wake Up', `Morning routine, ${name}!`, '‚òÄÔ∏è');
                addTimeSlot(addMinutes(wake, 30), 'Journaling', 'Plan your day', 'üìì');
                addTimeSlot(addMinutes(wake, 60), 'Work/Study', `${workHours || 4} hours focus`, 'üìö');
                addTimeSlot(workoutTime !== 'None' ? (workoutTime === 'Morning' ? addMinutes(wake, workHours * 60 + 60) : '18:00') : addMinutes(wake, workHours * 60 + 60), workoutTime !== 'None' ? 'Workout' : 'Rest', 'Stay active', 'üí™');
                addTimeSlot(addMinutes(wake, (workHours * 60) + 120), 'Hobbies', `${hobbyHours || 2} hours fun`, 'üé®');
                addTimeSlot('22:00', 'Sleep', `${sleepHours || 7} hours rest`, 'üò¥');
            } else if (mainGoal === 'Health') {
                addTimeSlot(wake, 'Stretch', 'Morning mobility', 'üßò');
                addTimeSlot(workoutTime !== 'None' ? (workoutTime === 'Morning' ? addMinutes(wake, 30) : '18:00') : addMinutes(wake, 30), workoutTime !== 'None' ? 'Workout' : 'Rest', 'Stay fit', 'üí™');
                addTimeSlot(addMinutes(wake, 90), 'Healthy Breakfast', 'Fuel up', 'üç≥');
                addTimeSlot(addMinutes(wake, 120), 'Work/Study', `${workHours || 4} hours focus`, 'üìö');
                addTimeSlot(addMinutes(wake, (workHours * 60) + 120), 'Hobbies', `${hobbyHours || 2} hours fun`, 'üé®');
                addTimeSlot('21:30', 'Sleep', `${sleepHours || 7} hours rest`, 'üò¥');
            } else {
                addTimeSlot(wake, 'Meditate', 'Clear mind', 'üßò');
                addTimeSlot(addMinutes(wake, 30), 'Work/Study', `${workHours || 4} hours focus`, 'üìö');
                addTimeSlot(workoutTime !== 'None' ? (workoutTime === 'Morning' ? addMinutes(wake, workHours * 60 + 30) : '18:00') : addMinutes(wake, workHours * 60 + 30), workoutTime !== 'None' ? 'Workout' : 'Rest', 'Stay active', 'üí™');
                addTimeSlot(addMinutes(wake, (workHours * 60) + 90), 'Hobbies', `${hobbyHours || 2} hours fun`, 'üé®');
                addTimeSlot(addMinutes(wake, (workHours * 60) + (hobbyHours * 60) + 90), 'Gratitude', 'Reflect', 'üôè');
                addTimeSlot('22:00', 'Sleep', `${sleepHours || 7} hours rest`, 'üò¥');
            }
            document.getElementById('routineResult').innerHTML = `<h3>${name}'s Routine</h3>` + schedule.map(item => `
                <div class="timeline-item ${item.completed ? 'completed' : ''}">
                    <span class="timeline-time">${item.time}</span>
                    <div class="timeline-content">
                        <div class="timeline-title">${item.title}</div>
                        <div>${item.description}</div>
                    </div>
                    <span class="timeline-emoji">${item.emoji}</span>
                </div>
            `).join('');
            document.getElementById('routineQuiz').style.display = 'none';
            showNotification('üéØ Routine generated! Let‚Äôs glow up!');
        }

        // Generate Fitness Plan
        function generateFitness() {
            const { fitnessLevel, fitnessGoal, dietaryRestrictions, workoutDays, workoutLocation, experience } = appState.fitnessAnswers;
            let plan = '';
            if (fitnessGoal === 'Weight Loss') {
                plan += `
                    <div class="routine-card">
                        <h3>Workouts</h3>
                        <p>${fitnessLevel === 'Beginner' ? 'Cardio (30 min)' : fitnessLevel === 'Intermediate' ? 'HIIT (20 min)' : 'Advanced Cardio (40 min)'} (${workoutDays || 3} days/week)</p>
                        <p>Location: ${workoutLocation || 'Gym'}</p>
                    </div>
                    <div class="routine-card">
                        <h3>Diet</h3>
                        <p>${dietaryRestrictions === 'None' ? 'High-protein, low-carb' : dietaryRestrictions === 'Vegetarian' ? 'Plant-based protein' : dietaryRestrictions === 'Vegan' ? 'Vegan protein' : 'Gluten-free meals'}</p>
                    </div>`;
            } else if (fitnessGoal === 'Muscle Gain') {
                plan += `
                    <div class="routine-card">
                        <h3>Workouts</h3>
                        <p>${fitnessLevel === 'Beginner' ? 'Strength (3 sets)' : fitnessLevel === 'Intermediate' ? 'Weightlifting (4 sets)' : 'Advanced Lifting (5 sets)'} (${workoutDays || 3} days/week)</p>
                        <p>Location: ${workoutLocation || 'Gym'}</p>
                    </div>
                    <div class="routine-card">
                        <h3>Diet</h3>
                        <p>${dietaryRestrictions === 'None' ? 'High-protein' : dietaryRestrictions === 'Vegetarian' ? 'Plant-based protein' : dietaryRestrictions === 'Vegan' ? 'Vegan protein' : 'Gluten-free protein'}</p>
                    </div>`;
            } else {
                plan += `
                    <div class="routine-card">
                        <h3>Workouts</h3>
                        <p>${fitnessLevel === 'Beginner' ? 'Light Cardio (30 min)' : fitnessLevel === 'Intermediate' ? 'Cardio (40 min)' : 'Endurance (50 min)'} (${workoutDays || 3} days/week)</p>
                        <p>Location: ${workoutLocation || 'Gym'}</p>
                    </div>
                    <div class="routine-card">
                        <h3>Diet</h3>
                        <p>${dietaryRestrictions === 'None' ? 'Balanced diet' : dietaryRestrictions === 'Vegetarian' ? 'Plant-based balanced' : dietaryRestrictions === 'Vegan' ? 'Vegan balanced' : 'Gluten-free balanced'}</p>
                    </div>`;
            }
            document.getElementById('fitnessResult').innerHTML = plan;
            document.getElementById('fitnessQuiz').style.display = 'none';
            showNotification('üí™ Fitness plan ready! Time to transform!');
        }

        // Notepad
        function saveNotepad() {
            localStorage.setItem('notepad', document.getElementById('personalNotes').value);
            showNotification('üìù Journal saved! Your thoughts are secure.');
        }

        function clearNotepad() {
            document.getElementById('personalNotes').value = '';
            localStorage.removeItem('notepad');
            showNotification('‚ú® Journal cleared. Fresh start!');
        }

        // Gratitude
        function addGratitude() {
            const input = document.getElementById('gratitudeInput');
            if (input.value.trim() && appState.gratitudeItems.length < 5) {
                appState.gratitudeItems.push(input.value.trim());
                updateGratitudeList();
                input.value = '';
                showNotification('üôè Gratitude added! Your positivity shines!');
            } else if (appState.gratitudeItems.length >= 5) {
                showNotification('‚ö†Ô∏è Max 5 gratitudes per day!');
            }
        }

        function updateGratitudeList() {
            const list = document.getElementById('gratitudeList');
            list.innerHTML = appState.gratitudeItems.map(item => `<li class="gratitude-item">${item}</li>`).join('');
            document.getElementById('gratitudeCount').textContent = appState.gratitudeItems.length;
            localStorage.setItem('gratitude', JSON.stringify(appState.gratitudeItems));
        }

        function clearGratitude() {
            appState.gratitudeItems = [];
            updateGratitudeList();
            showNotification('üåü Gratitude lab reset. New moments await!');
        }

        // Tasks
        function addTask() {
            const input = document.getElementById('taskInput');
            if (input.value.trim()) {
                appState.tasks.push({ title: input.value.trim(), completed: false, time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }), emoji: '‚úÖ' });
                updateTaskList();
                input.value = '';
                showNotification('‚úÖ Task added! You‚Äôre on fire!');
            }
        }

        function toggleTask(index) {
            appState.tasks[index].completed = !appState.tasks[index].completed;
            updateTaskList();
            showNotification(appState.tasks[index].completed ? 'üöÄ Task completed! Amazing work!' : '‚Ü©Ô∏è Task unmarked. Keep going!');
        }

        function deleteTask(index) {
            appState.tasks.splice(index, 1);
            updateTaskList();
            showNotification('üóëÔ∏è Task deleted. Streamlined focus!');
        }

        function updateTaskList() {
            const list = document.getElementById('taskList');
            list.innerHTML = appState.tasks.map((task, index) => `
                <div class="timeline-item ${task.completed ? 'completed' : ''}">
                    <span class="timeline-time">${task.time}</span>
                    <div class="timeline-content">
                        <div class="timeline-title">${task.title}</div>
                        <div>Task</div>
                    </div>
                    <span class="timeline-emoji">${task.emoji}</span>
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} onclick="toggleTask(${index})" aria-label="Mark ${task.title} as completed">
                    <button class="btn btn-danger" onclick="deleteTask(${index})" aria-label="Delete ${task.title}">‚ùå</button>
                </div>
            `).join('');
            const completed = appState.tasks.filter(t => t.completed).length;
            document.getElementById('totalTasks').textContent = appState.tasks.length;
            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('progressPercentage').textContent = appState.tasks.length ? `${Math.round(completed / appState.tasks.length * 100)}%` : '0%';
            localStorage.setItem('tasks', JSON.stringify(appState.tasks));
        }

        function clearTasks() {
            appState.tasks = [];
            updateTaskList();
            showNotification('üåü Tasks cleared. Fresh start!');
        }

        // Show Section
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[onclick="showSection('${id}')"]`).classList.add('active');
        }

        // Theme Switcher
        function setTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            appState.user.theme = theme;
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.theme === theme));
            localStorage.setItem('theme', theme);
            showNotification(`üé® Theme set to ${theme}`);
        }

        // AI Assistant
        function toggleAI() {
            const responses = [
                'Your glow-up is unstoppable! Ready for more? ‚ú®',
                'Energy levels optimal. Time to shine! üß†',
                'Try a quick mindfulness break to recharge! üßò',
                'You‚Äôre crushing it! Keep pushing forward! üî•',
                'Your progress is inspiring. Let‚Äôs level up! üöÄ'
            ];
            showNotification(responses[Math.floor(Math.random() * responses.length)]);
        }

        // Notification
        let notificationTimeout = null;
        function showNotification(message) {
            if (notificationTimeout) clearTimeout(notificationTimeout);
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            notificationTimeout = setTimeout(() => {
                notification.classList.remove('show');
                notificationTimeout = null;
            }, 3000);
        }

        // Helper: Add minutes
        function addMinutes(time, minutes) {
            const [hrs, mins] = time.split(':').map(Number);
            const totalMins = hrs * 60 + mins + minutes;
            const newHrs = Math.floor(totalMins / 60) % 24;
            const newMins = totalMins % 60;
            return `${newHrs.toString().padStart(2, '0')}:${newMins.toString().padStart(2, '0')}`;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            initQuiz('routineQuiz', routineQuestions, appState.routineStep);
            initQuiz('fitnessQuiz', fitnessQuestions, appState.fitnessStep);
            const savedNotepad = localStorage.getItem('notepad');
            if (savedNotepad) document.getElementById('personalNotes').value = savedNotepad;
            updateGratitudeList();
            updateTaskList();
            const savedTheme = localStorage.getItem('theme') || 'white';
            setTheme(savedTheme);

            document.getElementById('routinePrev').addEventListener('click', () => prevQuestion('routineQuiz'));
            document.getElementById('routineNext').addEventListener('click', () => nextQuestion('routineQuiz'));
            document.getElementById('routineFinish').addEventListener('click', () => finishQuiz('routineQuiz'));
            document.getElementById('fitnessPrev').addEventListener('click', () => prevQuestion('fitnessQuiz'));
            document.getElementById('fitnessNext').addEventListener('click', () => nextQuestion('fitnessQuiz'));
            document.getElementById('fitnessFinish').addEventListener('click', () => finishQuiz('fitnessQuiz'));

            document.querySelectorAll('.theme-btn').forEach(btn => btn.addEventListener('click', () => setTheme(btn.dataset.theme)));
        });

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }
    </script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body>
</html>
